const { SlashCommandBuilder, PermissionFlagsBits } = require('discord.js');

module.exports = {
  data: new SlashCommandBuilder()
    .setName('slowmode')
    .setDescription('Active le mode lent sur un salon.')
    .addIntegerOption(opt => opt.setName('secondes').setDescription('Nombre de secondes entre les messages (0 = off)').setRequired(true))
    .setDefaultMemberPermissions(PermissionFlagsBits.ManageChannels),

  async execute(interaction) {
    const seconds = interaction.options.getInteger('secondes');
    const channel = interaction.channel;
    const logChannel = interaction.guild.channels.cache.get('1365022194438115458');

    try {
      await channel.setRateLimitPerUser(seconds);
      await interaction.reply(`‚è±Ô∏è Mode lent ${seconds === 0 ? 'd√©sactiv√©' : `activ√© : ${seconds} sec`} sur ${channel}.`);
      if (logChannel) {
        logChannel.send(`üìã **Slowmode** : ${interaction.user.tag} a modifi√© le mode lent √† ${seconds} sec dans ${channel}`);
      }
    } catch (err) {
      console.error(err);
      await interaction.reply({ content: '‚ùå Erreur en appliquant le mode lent.', ephemeral: true });
    }
  }
};
